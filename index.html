<!DOCTYPE html>
<html>
  <head>
    <title>Konami Code Lab</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="node_modules/mocha/mocha.css" />
  </head>

  <body>
    <script src="konami_code.js"></script>
    <script>

    const code = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65]

    function init() {
      var index = 0

      document.body.addEventListener('keydown', function(e) {
        const key = parseInt(e.which || e.detail)

        if (code[index] === key) {
          index++

          if (index === code.length - 1) {
            alert('hurray!')

            index = 0
          }
        } else {
          index = 0
        }
      })

      init()
    </script>
    <!-- Open this file in the browser and call `mocha.run()` in console to run tests -->
    <div id="mocha"></div>
    <script src="node_modules/mocha/mocha.js"></script>
    <script src="node_modules/expect/umd/expect.min.js"></script>
    <script>mocha.setup('bdd');</script>
    <script src="test/index-test.js"></script>
  </body>
</html>
